<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>ServletCart1 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="购物车的一些设计代码今天学习了servlet实现购物车的添加商品进购物车，从购物车中删除商品，计算商品的总价格">
<meta name="keywords" content="jsp,servlet,java">
<meta property="og:type" content="article">
<meta property="og:title" content="ServletCart1">
<meta property="og:url" content="http://yoursite.com/2017/12/08/ServletCart1/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="购物车的一些设计代码今天学习了servlet实现购物车的添加商品进购物车，从购物车中删除商品，计算商品的总价格">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2017-12-08T14:01:00.114Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ServletCart1">
<meta name="twitter:description" content="购物车的一些设计代码今天学习了servlet实现购物车的添加商品进购物车，从购物车中删除商品，计算商品的总价格">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/plugin/bganimation/bg.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <div class="outer">
        <div class="widget-wrap mobile-header">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <img class="avatar" src="/img/love.jpg">
    <h2 class="author">shangrila-xiu</h2>
    <h3 class="description"></h3>
    <div class="count-box">
      <a href="/archives"><div><strong>54</strong><br>文章</div></a>
      <a href="/categories"><div><strong>44</strong><br>分类</div></a>
      <a href="/tags"><div><strong>27</strong><br>标签</div></a>
    </div>
    <ul class="blog-link">
     
          <a href="/" title="Home">
            <li>主页</li>
          </a>
        
          <a href="/archives" title="Archives">
            <li>归档</li>
          </a>
        
          <a href="/categories" title="Categories">
            <li>分类</li>
          </a>
        
          <a href="/tags" title="Tags">
            <li>标签</li>
          </a>
        
    </ul>
  </div>
</div>

        <section id="main"><article id="post-ServletCart1" class="wow slideInRight article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/12/08/ServletCart1/" class="article-date">
  <time class="post-time" datetime="2017-12-08T12:07:49.000Z" itemprop="datePublished">
    <span class="post-month">12月</span><br/>
    <span class="post-day">08</span>
  </time>
</a>
   
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      ServletCart1
    </h1>
  

        <div>
          
  <div class="article-category">
    <a class="article-category-link" href="/categories/简单的购物车类的实现代码/">简单的购物车类的实现代码</a>
  </div>

          
              

          
        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="购物车的一些设计代码"><a href="#购物车的一些设计代码" class="headerlink" title="购物车的一些设计代码"></a>购物车的一些设计代码</h1><h2 id="今天学习了servlet实现购物车的添加商品进购物车，从购物车中删除商品，计算商品的总价格"><a href="#今天学习了servlet实现购物车的添加商品进购物车，从购物车中删除商品，计算商品的总价格" class="headerlink" title="今天学习了servlet实现购物车的添加商品进购物车，从购物车中删除商品，计算商品的总价格"></a>今天学习了servlet实现购物车的添加商品进购物车，从购物车中删除商品，计算商品的总价格</h2><a id="more"></a>
<h2 id="1、首先设计商品实体类items-java-代码如下："><a href="#1、首先设计商品实体类items-java-代码如下：" class="headerlink" title="1、首先设计商品实体类items.java,代码如下："></a>1、首先设计商品实体类items.java,代码如下：</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> entity;</div><div class="line"><span class="comment">//商品的属性</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Items</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;<span class="comment">//商品编号</span></div><div class="line">	<span class="keyword">private</span> String name;<span class="comment">//商品名称</span></div><div class="line">	<span class="keyword">private</span> String city;<span class="comment">//商品产地</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> price;<span class="comment">//商品价格</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> number;<span class="comment">//商品数量</span></div><div class="line">	<span class="keyword">private</span> String picture;<span class="comment">//商品图片</span></div><div class="line">  <span class="comment">//构造方法</span></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Items</span><span class="params">(<span class="keyword">int</span> id, String name, String city, <span class="keyword">int</span> price, <span class="keyword">int</span> number,String picture)</span> </span>&#123;</div><div class="line">		<span class="comment">// TODO Auto-generated constructor stub</span></div><div class="line">		<span class="keyword">this</span>.city=city;<span class="keyword">this</span>.id=id;<span class="keyword">this</span>.name=name;<span class="keyword">this</span>.number=number;<span class="keyword">this</span>.price=price;<span class="keyword">this</span>.picture=picture;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Items</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="comment">// TODO Auto-generated constructor stub</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> id;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.id = id;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> name;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.name = name;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getCity</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> city;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCity</span><span class="params">(String city)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.city = city;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPrice</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> price;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPrice</span><span class="params">(<span class="keyword">int</span> price)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.price = price;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getNumber</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> number;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNumber</span><span class="params">(<span class="keyword">int</span> number)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.number = number;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getPicture</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> picture;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPicture</span><span class="params">(String picture)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.picture = picture;</div><div class="line">	&#125;	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="2、设计购物车类-Cart-java。这里面有三个方法。我就分开写吧"><a href="#2、设计购物车类-Cart-java。这里面有三个方法。我就分开写吧" class="headerlink" title="2、设计购物车类:Cart.java。这里面有三个方法。我就分开写吧"></a>2、设计购物车类:Cart.java。这里面有三个方法。我就分开写吧</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> entity;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.HashMap;</div><div class="line"><span class="keyword">import</span> java.util.Iterator;</div><div class="line"><span class="keyword">import</span> java.util.Map;</div><div class="line"><span class="keyword">import</span> java.util.Set;</div><div class="line"></div><div class="line"><span class="comment">//购物车类</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Cart</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="comment">//购买商品的集合，HashMap提高集合的安全性以及后面的便利</span></div><div class="line">	<span class="keyword">private</span> HashMap&lt;Items,Integer&gt; goods;</div><div class="line">	</div><div class="line">	<span class="comment">//购物车的总金额</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">double</span> totalPrice;</div><div class="line"></div><div class="line">	<span class="comment">//构造方法</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Cart</span><span class="params">()</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		<span class="comment">//对上面的变量初始化</span></div><div class="line">		goods = <span class="keyword">new</span> HashMap&lt;Items,Integer&gt;();</div><div class="line">		totalPrice = <span class="number">0.0</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> HashMap&lt;Items, Integer&gt; <span class="title">getGoods</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> goods;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setGoods</span><span class="params">(HashMap&lt;Items, Integer&gt; goods)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.goods = goods;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getTotalPrice</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> totalPrice;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTotalPrice</span><span class="params">(<span class="keyword">double</span> totalPrice)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.totalPrice = totalPrice;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="a-添加商品进购物车的方法："><a href="#a-添加商品进购物车的方法：" class="headerlink" title="a:添加商品进购物车的方法："></a>a:添加商品进购物车的方法：</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">//添加商品进购物车。参数分别是购买商品的对象和数量</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">addGoodsInCart</span><span class="params">(Items item ,<span class="keyword">int</span> number)</span></span></div><div class="line"><span class="function"></span>&#123;</div><div class="line">	goods.put(item, goods.get(item)+number);</div><div class="line">	goods.put(item, number);	</div><div class="line">	calTotalPrice(); <span class="comment">//重新计算商品的总金额</span></div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="b-删除商品的方法"><a href="#b-删除商品的方法" class="headerlink" title="b:删除商品的方法"></a>b:删除商品的方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">//删除商品的方法</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">removeGoodsFromCart</span><span class="params">(Items item)</span></span></div><div class="line"><span class="function"></span>&#123;</div><div class="line">	goods.remove(item);<span class="comment">//goods的一个方法有remove()</span></div><div class="line">	calTotalPrice(); <span class="comment">//重新计算商品的总金额</span></div><div class="line">	<span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="c-计算商品的总金额"><a href="#c-计算商品的总金额" class="headerlink" title="c:计算商品的总金额"></a>c:计算商品的总金额</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//计算总金额。这个方法没有参数</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">calTotalPrice</span><span class="params">()</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		<span class="keyword">double</span> sum = <span class="number">0.0</span>;<span class="comment">//初始化商品的总金额</span></div><div class="line">		Set&lt;Items&gt; keys = goods.keySet(); <span class="comment">//为了遍历，首先需要获得键的集合</span></div><div class="line">		Iterator&lt;Items&gt; it = keys.iterator(); <span class="comment">//添加一个迭代器，并获得迭代器的一个对象</span></div><div class="line">	    <span class="keyword">while</span>(it.hasNext())<span class="comment">//使用wile循环遍历</span></div><div class="line">	    &#123;</div><div class="line">	    	Items i = it.next();</div><div class="line">	    	sum += i.getPrice()* goods.get(i);<span class="comment">//计算总金额使用的函数</span></div><div class="line">	    &#125;</div><div class="line">	    <span class="keyword">this</span>.setTotalPrice(sum); <span class="comment">//设置总金额sum</span></div><div class="line">	    <span class="keyword">return</span> <span class="keyword">this</span>.getTotalPrice();<span class="comment">//返回总金额</span></div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<h2 id="3、测试购物车类，在Cart-java中写一个main方法"><a href="#3、测试购物车类，在Cart-java中写一个main方法" class="headerlink" title="3、测试购物车类，在Cart.java中写一个main方法"></a>3、测试购物车类，在Cart.java中写一个main方法</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		</div><div class="line">		<span class="comment">//创建的对象</span></div><div class="line">		Items i1 = <span class="keyword">new</span> Items(<span class="number">1</span>,<span class="string">"高数"</span>,<span class="string">"广州"</span>,<span class="number">80</span>,<span class="number">500</span>,<span class="string">"001.jpg"</span>);</div><div class="line">		Items i2 = <span class="keyword">new</span> Items(<span class="number">2</span>,<span class="string">"软件工程"</span>,<span class="string">"上海"</span>,<span class="number">120</span>,<span class="number">800</span>,<span class="string">"002.jpg"</span>);</div><div class="line">		Cart c = <span class="keyword">new</span> Cart();</div><div class="line">		c.addGoodsInCart(i1, <span class="number">1</span>);</div><div class="line">		c.addGoodsInCart(i2, <span class="number">2</span>);</div><div class="line">		System.out.println(<span class="string">"购物车的总金额为："</span>+c.getTotalPrice());</div><div class="line">		</div><div class="line">		<span class="comment">//变量购物商品的集合</span></div><div class="line">		Set&lt;Map.Entry&lt;Items, Integer&gt;&gt; items= c.getGoods().entrySet();</div><div class="line">		<span class="keyword">for</span>(Map.Entry&lt;Items, Integer&gt; obj:items)</div><div class="line">		&#123;</div><div class="line">			System.out.println(obj);</div><div class="line">		&#125;</div><div class="line">		System.out.println(<span class="string">"购物车的总金额为"</span>+c.getTotalPrice());</div><div class="line">		</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<h2 id="4、得到的结果有hash码，所以需要转换一下：在items-java下面写一个toString-方法"><a href="#4、得到的结果有hash码，所以需要转换一下：在items-java下面写一个toString-方法" class="headerlink" title="4、得到的结果有hash码，所以需要转换一下：在items.java下面写一个toString()方法"></a>4、得到的结果有hash码，所以需要转换一下：在items.java下面写一个toString()方法</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="string">"商品编号："</span>+<span class="keyword">this</span>.getId()+<span class="string">"商品名称"</span>+<span class="keyword">this</span>.getName();</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<h2 id="5、如果购买的同一种商品多次呢？同样的在Cart-java中修改main方法："><a href="#5、如果购买的同一种商品多次呢？同样的在Cart-java中修改main方法：" class="headerlink" title="5、如果购买的同一种商品多次呢？同样的在Cart.java中修改main方法："></a>5、如果购买的同一种商品多次呢？同样的在Cart.java中修改main方法：</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		</div><div class="line">		<span class="comment">//创建的对象</span></div><div class="line">		Items i1 = <span class="keyword">new</span> Items(<span class="number">1</span>,<span class="string">"高数"</span>,<span class="string">"广州"</span>,<span class="number">80</span>,<span class="number">500</span>,<span class="string">"001.jpg"</span>);</div><div class="line">		Items i2 = <span class="keyword">new</span> Items(<span class="number">2</span>,<span class="string">"软件工程"</span>,<span class="string">"上海"</span>,<span class="number">120</span>,<span class="number">800</span>,<span class="string">"002.jpg"</span>);</div><div class="line">  <span class="comment">//再次购买编号为2的这件商品</span></div><div class="line">		Items i3 = <span class="keyword">new</span> Items(<span class="number">2</span>,<span class="string">"软件工程"</span>,<span class="string">"上海"</span>,<span class="number">120</span>,<span class="number">800</span>,<span class="string">"002.jpg"</span>);</div><div class="line">		</div><div class="line">		Cart c = <span class="keyword">new</span> Cart();</div><div class="line">		c.addGoodsInCart(i1, <span class="number">1</span>);</div><div class="line">		c.addGoodsInCart(i2, <span class="number">2</span>);</div><div class="line">		<span class="comment">//再次商品进购物车</span></div><div class="line">		c.addGoodsInCart(i3, <span class="number">3</span>);</div><div class="line">		</div><div class="line">		System.out.println(<span class="string">"购物车的总金额为："</span>+c.getTotalPrice());</div><div class="line">		</div><div class="line">		<span class="comment">//变量购物商品的集合</span></div><div class="line">		Set&lt;Map.Entry&lt;Items, Integer&gt;&gt; items= c.getGoods().entrySet();</div><div class="line">		<span class="keyword">for</span>(Map.Entry&lt;Items, Integer&gt; obj:items)</div><div class="line">		&#123;</div><div class="line">			System.out.println(obj);</div><div class="line">		&#125;</div><div class="line">		System.out.println(<span class="string">"购物车的总金额为"</span>+c.getTotalPrice());</div><div class="line">		</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<h3 id="这里会出现一个重要的问题：购买的同样的商品没有组合到一起，而是分别显示出来了，可喜的是商品的总金额没有问题。"><a href="#这里会出现一个重要的问题：购买的同样的商品没有组合到一起，而是分别显示出来了，可喜的是商品的总金额没有问题。" class="headerlink" title="这里会出现一个重要的问题：购买的同样的商品没有组合到一起，而是分别显示出来了，可喜的是商品的总金额没有问题。"></a>这里会出现一个重要的问题：购买的同样的商品没有组合到一起，而是分别显示出来了，可喜的是商品的总金额没有问题。</h3><h2 id="6、接下来就是来解决上面的这个问题：如何保证不添加重复的商品进购物车？"><a href="#6、接下来就是来解决上面的这个问题：如何保证不添加重复的商品进购物车？" class="headerlink" title="6、接下来就是来解决上面的这个问题：如何保证不添加重复的商品进购物车？"></a>6、接下来就是来解决上面的这个问题：如何保证不添加重复的商品进购物车？</h2><h2 id="我需要在实体层的entity中重写item-java从object父类继承来的equals-Object-obj-和hashCode-这两个方法，下面就来写一下这两个方法吧！"><a href="#我需要在实体层的entity中重写item-java从object父类继承来的equals-Object-obj-和hashCode-这两个方法，下面就来写一下这两个方法吧！" class="headerlink" title="我需要在实体层的entity中重写item.java从object父类继承来的equals(Object obj)和hashCode()这两个方法，下面就来写一下这两个方法吧！"></a><u>我需要在实体层的entity中重写item.java从object父类继承来的equals(Object obj)和hashCode()这两个方法</u>，下面就来写一下这两个方法吧！</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//避免商品重复：hashCode方法、equals方法</span></div><div class="line"><span class="meta">@Override</span></div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</div><div class="line">			<span class="comment">// TODO Auto-generated method stub</span></div><div class="line">			<span class="keyword">return</span> <span class="keyword">this</span>.getId()+<span class="keyword">this</span>.getName().hashCode();</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="meta">@Override</span></div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</div><div class="line">			<span class="comment">// TODO Auto-generated method stub</span></div><div class="line">			<span class="keyword">if</span>(<span class="keyword">this</span>==obj)<span class="comment">//判断obj是不是同一个对象</span></div><div class="line">			&#123;</div><div class="line">				<span class="keyword">return</span> <span class="keyword">true</span>;<span class="comment">//如果是，就返回true</span></div><div class="line">			&#125;</div><div class="line">			<span class="keyword">if</span>(obj <span class="keyword">instanceof</span> Items)<span class="comment">//判断obj是不是商品</span></div><div class="line">			&#123;</div><div class="line">				Items i = (Items)obj;<span class="comment">//如果是，就强制类型转换为商品对象</span></div><div class="line">				<span class="keyword">if</span>(<span class="keyword">this</span>.getId()==i.getId()&amp;&amp;<span class="keyword">this</span>.getName().equals(i.getName()))<span class="comment">//判断它们的id和name是不是分别相等的</span></div><div class="line">				&#123;</div><div class="line">					<span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">				&#125;</div><div class="line">				<span class="keyword">else</span></div><div class="line">				&#123;</div><div class="line">					<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">else</span></div><div class="line">			&#123;</div><div class="line">				<span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">			&#125;</div><div class="line">		&#125;</div></pre></td></tr></table></figure>
<p>不要高兴太早，虽然解决了重复添加的问题。但是还有一个新的问题出现了。那就是后面添加的相同的商品干脆就覆盖上面的原本添加的商品了。那下面我就来解决这个问题吧！</p>
<h2 id="7、解决这个的办法就是在Cart-java中的“添加商品进购物车的方法addGoodsInCart-”"><a href="#7、解决这个的办法就是在Cart-java中的“添加商品进购物车的方法addGoodsInCart-”" class="headerlink" title="7、解决这个的办法就是在Cart.java中的“添加商品进购物车的方法addGoodsInCart()”"></a>7、解决这个的办法就是在Cart.java中的“添加商品进购物车的方法addGoodsInCart()”</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">//添加商品进购物车。参数分别是购买商品的对象和数量</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">addGoodsInCart</span><span class="params">(Items item ,<span class="keyword">int</span> number)</span></span></div><div class="line"><span class="function"></span>&#123;</div><div class="line">	<span class="comment">//判断商品是不是同一件商品</span></div><div class="line">	<span class="keyword">if</span>(goods.containsKey(item))</div><div class="line">	&#123;</div><div class="line">		goods.put(item, goods.get(item)+number);<span class="comment">//注意这里逗号后面不能简单的写成number</span></div><div class="line">	&#125;</div><div class="line">	<span class="keyword">else</span></div><div class="line">	&#123;</div><div class="line">		goods.put(item, number);	<span class="comment">//把相同的商品加到一起</span></div><div class="line">	&#125;</div><div class="line">	calTotalPrice(); <span class="comment">//重新计算商品的总金额</span></div><div class="line">	<span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="经上面的代码，就可以把刚才提出的问题圆满的解决了。"><a href="#经上面的代码，就可以把刚才提出的问题圆满的解决了。" class="headerlink" title="经上面的代码，就可以把刚才提出的问题圆满的解决了。"></a>经上面的代码，就可以把刚才提出的问题圆满的解决了。</h4>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/12/08/ServletCart1/" data-id="cjeh0eiyy000bv4vpiq0c5pme" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jsp/">jsp</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/servlet/">servlet</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/12/08/ServletCart2/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          ServletCart2
        
      </div>
    </a>
  
  
    <a href="/2017/12/08/ServletStudy1/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">ServletStudy1</div>
    </a>
  
</nav>

  
</article>



</section>
        
          <aside id="sidebar">
  
    <div class="widget-wrap">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <h1 class="blog-title">Hexo</h1>
    <h2 class="blog-subtitle"></h2>
    <ul class="blog-link">
     
          <a href="/" title="Home">
            <li>主页</li>
          </a>
        
          <a href="/archives" title="Archives">
            <li>归档</li>
          </a>
        
          <a href="/categories" title="Categories">
            <li>分类</li>
          </a>
        
          <a href="/tags" title="Tags">
            <li>标签</li>
          </a>
        
    </ul>
  </div>
</div>

  
    <div class="widget-wrap">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <img class="avatar" src="/img/love.jpg">
    <h2 class="author">shangrila-xiu</h2>
    <h3 class="description"></h3>
    <div class="count-box">
      <a href="/archives"><div><strong>54</strong><br>文章</div></a>
      <a href="/categories"><div><strong>44</strong><br>分类</div></a>
      <a href="/tags"><div><strong>27</strong><br>标签</div></a>
    </div>



    <div class="social-link">
      
        <a class="hvr-bounce-in" href="https://github.com/shangrila-xiu/shangrila-xiu.github.io" target="_blank" title="Github">
          Github
        </a>
      
    </div>

    <div class="friend-link">
      <h2>友情链接</h2>
      
        <a class="hvr-bounce-in" href="http://blog.shanamaid.top/" target="_blank" title="ShanaMaid">
          ShanaMaid
        </a>
      
        <a class="hvr-bounce-in" href="https://blog.chionlab.moe/" target="_blank" title="Chion Tang">
          Chion Tang
        </a>
      
        <a class="hvr-bounce-in" href="https://uestcmao.github.io/" target="_blank" title="uestcmao">
          uestcmao
        </a>
      
        <a class="hvr-bounce-in" href="https://blog.xingbofeng.com/" target="_blank" title="Encounter">
          Encounter
        </a>
      
        <a class="hvr-bounce-in" href="http://chuangzaoshi.com/" target="_blank" title="创造师">
          创造师
        </a>
      
        <a class="hvr-bounce-in" href="https://calpa.me/" target="_blank" title="Calpa">
          Calpa
        </a>
      
        <a class="hvr-bounce-in" href="http://blog.csdn.net/qq_25560423/article/details/53785411" target="_blank" title="Updating!">
          Updating!
        </a>
      
        <a class="hvr-bounce-in" href="http://ijiaober.github.io/2014/08/05/hexo/hexo-04/" target="_blank" title="GoonX">
          GoonX
        </a>
      
        <a class="hvr-bounce-in" href="https://github.com/iissnan/hexo-theme-next/wiki" target="_blank" title="wiki">
          wiki
        </a>
      
        <a class="hvr-bounce-in" href="https://www.zhihu.com/question/29017171" target="_blank" title="tagsAndcategories">
          tagsAndcategories
        </a>
      
        <a class="hvr-bounce-in" href="http://www.mamicode.com/info-detail-1581625.html" target="_blank" title="property">
          property
        </a>
      
        <a class="hvr-bounce-in" href="http://echarts.baidu.com/examples.html#chart-type-scatter" target="_blank" title="echart">
          echart
        </a>
      
        <a class="hvr-bounce-in" href="http://www.haoeasy.cn/" target="_blank" title="love">
          love
        </a>
      
        <a class="hvr-bounce-in" href="https://exacity.github.io" target="_blank" title="陈微明学长">
          陈微明学长
        </a>
      
    </div>
  </div>
</div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy;2017 - 2018 shangrila-xiu<br>
      由<a href="http://hexo.io/" target="_blank">Hexo</a>强力驱动 | 
      主题-<a href="https://github.com/ShanaMaid/hexo-theme-shana">Shana</a>
      
    </div>
    
  </div>
</footer>
    </div>
    

<script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="//apps.bdimg.com/libs/wow/0.1.6/wow.min.js"></script>
<script>
new WOW().init();
</script>   


  <link rel="stylesheet" href="/plugin/fancybox/jquery.fancybox.css">
  <script src="/plugin/fancybox/jquery.fancybox.pack.js"></script>



  <link rel="stylesheet" href="/plugin/galmenu/GalMenu.css">
  <script src="/plugin/galmenu/GalMenu.js"></script>
  <div class="GalMenu GalDropDown">
      <div class="circle" id="gal">
        <div class="ring">
          
            <a href="/" title="" class="menuItem">首页</a>
          
            <a href="/tags" title="" class="menuItem">标签</a>
          
            <a href="/categories" title="" class="menuItem">分类</a>
          
            <a href="/archives" title="" class="menuItem">归档</a>
          
            <a href="/xxxxxxxxx" title="" class="menuItem">xxx</a>
          
            <a href="/xxxxxxx" title="" class="menuItem">xxxx</a>
          
        </div>
        
          <audio id="audio" src="#"></audio>
        
      </div> 
</div>
<div id="overlay" style="opacity: 1; cursor: pointer;"></div>
  <script type="text/javascript">var items = document.querySelectorAll('.menuItem');
    for (var i = 0,
    l = items.length; i < l; i++) {
      items[i].style.left = (50 - 35 * Math.cos( - 0.5 * Math.PI - 2 * (1 / l) * i * Math.PI)).toFixed(4) + "%";
      items[i].style.top = (50 + 35 * Math.sin( - 0.5 * Math.PI - 2 * (1 / l) * i * Math.PI)).toFixed(4) + "%"
    }</script>
<script type="text/javascript">
  $(document).ready(function() {
    $('body').GalMenu({
      'menu': 'GalDropDown'
    })
  });
</script>

  <section class="hidden-xs"> 
  <ul class="cb-slideshow"> 
    <li><span>苟利</span></li> 
    <li><span>国家</span></li> 
    <li><span>生死以</span></li> 
    <li><span>岂能</span></li> 
    <li><span>祸福</span></li> 
    <li><span>趋避之</span></li> 
  </ul>
</section>
<script src="/js/script.js"></script>



  </div>
</body>
</html>